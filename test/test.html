<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Textgrad : a jQuery text gradient plugin</title>
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="../src/jquery.textgrad.js"></script>
<style type="text/css">
body{
padding:0;margin:0;
background:#CCC}
#all{
padding:20px;
background:#FFF;
width:700px;margin:auto;text-align:justify;}
pre,.code{border:1px dashed gray;
background:#DDD;}
.code{
white-space: pre;
font-family:monospace;}
dt{font-weight:bold;font-family:monospace;}
dd{max-width:400px}
dd.default{font-style:italic;}
</style>
</head>
<body>
<div id="all">
<h1><span class="title">Textgrad : a jQuery text gradient plugin</span></h1>

<p>Here is my very first attempt to make a text-gradient plugin for jquery.
It contains four functions appliable to a selection :
spanize, unspanize, textgrad and textscan.</p>

<p>You can consider this version as being on version 0.</p>

<h2><span class="subtitle">spanize</span></h2>

<p>spanize will take an element, and cut its text into spans.
It takes two arguments, you might call it like this :<br/>
<span class='code'>$('...').spanize(spanClass,maxGroup);</span><br/>
Both arguments are mandatory for it to work correctly.
I was not able to find a case when there is a problem in this process,
but it doesn't mean it's bug-proof. Please feedback any trouble to me.
</p>

<dl>
<dt>spanClass</dt><dd>the class to be given to the spans generated. If you
specify an empty string, the function will not bother adding classes. But
if you want to unspanize the block later, you'd better give a spanClass to
know what to remove...</dd>
<dt>maxGroup</dt><dd>the maximum number of characters each span created
will contain. A span never contains any spacing character.</dd>
</dl>

<h2><span class="subtitle">unspanize</span></h2>

<p>unspanize will take an element, remove all the opening and closing tags
of any span having for class the argument given.
The text will remain the same.
</p>

<p id="unspanex">Example : <span class='code'>ceci est <b>du code</b> dans un span</span>,
et puis <i>d'autres</i> <b>choses <i>avec</i> des</b> balises.</p>
<input id="buttspanex" type="button" value="Spanize" onclick="essaispanize()"/>
<input id="buttunspanex" type="button" value="Unspanize" onclick="essaiunspanize()"/>
<script type="text/javascript">
$('#buttunspanex').hide();
function essaispanize(){
$('#unspanex').spanize('essaispanize',3);
alert("The html() of the paragraph is now :\n"+$('#unspanex').html());
$('#buttspanex').hide();
$('#buttunspanex').show();}

function essaiunspanize(){
$('#unspanex').unspanize('essaispanize');
alert("The html() of the paragraph is now :\n"+$('#unspanex').html());
$('#buttunspanex').hide();
$('#buttspanex').show();}
</script>

<p>The argument for that function is :</p>
<dl>
<dt>spanClass</dt><dd>the class of the spans to be removed within
the selected element. If you give an empty string, all the spans
will be removed.</dd>
</dl>

<h2><span class="subtitle">textgrad</span></h2>
<p>The basical use is very straight-forward :</p>
<p class="code">$('...').textgrad({option:value,...});</p>
<p>Currently supported options :</p>
<dl>
<dt>begin</dt><dd>a color expressed either as a String with 3 or 6 digits
(the initial # being optional), or as an array of 3 numbers, as [125,0,241].
Values under 0 will be set to 0, above 255 to 255.</dd>
<dd class="default">default : 'F00'</dd>
<dt>end</dt><dd>a color, same as begin</dd>
<dd class="default">default : '0FF' (yes, the default is ugly, you really have to change it)</dd>
<dt>colgrad</dt><dd>you can specify a color gradient more elaborate,
in which case begin and end will be ignored. A color gradient is an array of
objects following the pattern : <span class="code">{pc:number,col:color}</span><br/>
pc for percent : the percentage of the position of this color,<br/>
col for color : the value of the color at this place, specified as begin or end above.
</dd>
<dd class="default">default : generated by the program as begin color at 0% and end color at 100%</dd>
<dt>type</dt><dd>the type of gradient you would like, can be either<br/>
'_' : horizontal gradient (begin or 0% is on the left-side),<br/>
'|' : vertical gradient (works for any text block, but pointless it has only one line...) (begin or 0% is on the top),<br/>
'o' : circled gradient, from (almost) the center of the block to the corners (begin or 0% is at the center),<br/>
'/' : from the bottom-left corner of the box to the right-top one (begin or 0% is on the bottom-left corner) (if the block has only one line, converted to '_'),<br/>
'\' or anything : form top-left corner to bottom-right corner (begin or 0% is on the top-left corner) (if the block has only one line, converted to '_').
</dd>
<dd class="default">default : '\'</dd>
<dt>spanize</dt><dd>number. Here I have to explain a bit how the gradient is
made : it splits the text inside of the selected block into spans, then uses
their relative position inside of the block to compute the css-color to be
applied, given a distance function determined by the type of gradient. If you
have already applied a gradient to that block, or spanized it before,
it has already been splitted, no need to do it again, you would then
put a negative value, like -1.</dd>
<dd class="default">default : 1</dd>
<dt>spanClass</dt><dd>the class to be given to the spans generated</dd>
<dd class="default">default : empty</dd>
<dt>maxGroup</dt><dd>the maximum number of characters each span created
will contain. For small texts, like a title, put 1, for bigger texts it can
become quite slow, so don't put 1. The quality of the gradient might be almost
the same anyways if you don't have a very strong gradient. Note that maxgroup=50
is generally useless : at most the span contains a whole word, but no spacing
character.</dd>
<dd class="default">default : 3</dd>
<dt>cb</dt><dd>callback function after the gradient has been applied</dd>
<dd class="default">default : none</dd>
</dl>

<p>A few guidelines on how to use it :</p>
<ul>
<li>It uses the whole width of the element to make the computation on the
colors of the generated spans, therefore the gradient might be invisible
on very wide blocks containing few text, for that case you may do as
I have manually done on this page on the subtitles (but can be done
automatically) : apply
the gradient to a span instead, containing the whole text. The limitation
of this is that your block must not contain inline blocks, but hey, it
must contain very short text anyways...</li>
<li>The block you apply the gradient to must have very little padding/margin,
the best case being when it has none. I have noyt found a way to get the
value of padding/margin for sure as a pixels value. Anyone knowing how to
do this, I am interested.</li>
<li>The round gradient is not very well centered. Still have no clue why
but I'll be investigating.</li>
<li>Don't use it for big texts, and don't use it for too many small texts.
I think this page is an example of the maximum limit it can be used before it
gets very long for the user-agent to finish the page.</li>
</ul>

<h2><span class="subtitle">textscan</span></h2>

<p>textscan will make a little animation.
 Please note that it is not as carefully crafted
as you might expect...<br/>
Any help or suggestions on this greatly appreciated.</p>
<p>So, the idea is that when you want a piece of text to change from one color
to another, not to do it on the whole text but only little by little,
like a 'scanning' effect.</p>

<p><span id="try">So typically, this is what textscan does.</span></p>
<script type="text/javascript">
$('#try').spanize('anim',1);
function animateit(){
$('#butt').hide();
$('#try').textscan({
  spanize:-1,
  unspanize:-1,
  spanClass:'anim',
  initColor:'000',
  endColor:'000',
  transColor:'0F0',
  cb:function(){$('#butt').show();}});
}
</script>
<input
  type="button"
  id="butt"
  value="Scan it !"
  onclick="animateit()"/>

<p><span id="try2">Double scanning now, there slow, back fast !</span></p>
<script type="text/javascript">
$('#try2').spanize('anim',1);
function animateit2(){
$('#butt2').hide();
$('#try2').textscan({
  spanize:-1,
  unspanize:-1,
  spanClass:'anim',
  initColor:'000',
  endColor:'CCC',
  transColor:'0F0',
  cb:function(){
    $('#try2').textscan({
      spanize:-1,
      unspanize:-1,
      amplitude:5,
      step:10,
      spanClass:'anim',
      initColor:'CCC',
      direction:'<-',
      endColor:'000',
      transColor:'0F0',
      cb:function(){
        $('#butt2').show();}});
}});
}
</script>
<input
  type="button"
  id="butt2"
  value="Scan it !"
  onclick="animateit2()"/>

<p>This animation gets very slow on text bigger than a hundred characters.
I don't really recommend to use it as is on anything bigger than a title, and
it's not yet really finished...</p>
<p>It creates gradient objects (as the colgrad of textgrad) using the parameters,
and applies them to the block the one after the other...
Nothing really optimized yet.</p>
<p>It is called the same way as textgrad, but the parameters are different.
So here they are.</p>
<dl>
<dt>initColor</dt><dd>the color the text has as the beginning of the animation.</dd>
<dd class="default">default : '000'</dd>
<dt>endColor</dt><dd>the color will have at the end</dd>
<dd class="default">default : 'F00'</dd>
<dt>transColor</dt><dd>the transition color</dd>
<dd class="default">default : 'FFF'</dd>
<dt>direction</dt><dd>direction of the animation, can be '-&gt;' or anything, meaning left-to-right or right-to-left</dd>
<dd class="default">default : '-&gt;'</dd>

<dt>amplitude</dt><dd>in %, the width of the scanning gradient</dd>
<dd class="default">default : 20</dd>
<dt>step</dt><dd>in %, how much the scan must move forward each step</dd>
<dd class="default">default : 5</dd>

<dt>spanize</dt><dd>same as textgrad one ; if the block you want to apply the
animation to has already been spanized, put a negative value not to do it again.
It's crucial if you want to chain the textscan thanks to the callback below...
if you spanize in a recusive way, the animation will get very slow after a
few times. I'm not sure there is a 100% efficient way to automate this choice,
so be very careful. If somebody smarter than me has a solution to this, please
contact me.</dd>
<dd class="default">default : 1</dd>

<dt>unspanize</dt><dd>number. If you want the generated spans to be removed
at the end of the animation, put a positive value. If you want to chain, don't unspanize but don't
spanize either, so give a negative value to both.</dd>
<dd class="default">default : 1</dd>

<dt>spanClass</dt><dd>the class to be given to the spans generated, only used when spanizing</dd>
<dd class="default">default : empty</dd>

<dt>maxGroup</dt><dd>same as textgrad one, only used when spanizing</dd>
<dd class="default">default : 2</dd>

<dt>cb</dt><dd>callback function after the animation has finished...
useful if you want to chain and make a return textscan in the other direction</dd>

</dl>

<hr/>

<h2><span class="subtitle">Contact</span></h2>

<p>Please contact me at <em>sub-tenante@yahoo.fr</em>,
removing the hyphen from the first part.</p>

<hr/>

<h2><span class="subtitle">Download</span></h2>

<a href='../src/jquery.textgrad.js'>Et voilà !</a>


<div>
<p style="text-align:center;padding:20px;border-top:1px gray solid">
Copyright 2007, Guillaume Andrieu
</p></div>
</div>
<script type="text/javascript">
$('dd').not('.default').textgrad({type:'/',begin:'000',end:'D60'});
$('.subtitle').textgrad({maxGroup:1,type:'_',begin:'D60',end:'000'});
$('.title').textgrad({maxGroup:1,type:'_',colgrad:[{pc:20,col:'D60'},{pc:40,col:'A98'},{pc:70,col:'C40'},{pc:90,col:'000'}]});
</script>
</body>
</html>
